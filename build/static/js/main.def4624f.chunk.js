(this["webpackJsonpchess-front"]=this["webpackJsonpchess-front"]||[]).push([[0],{25:function(e,t,n){e.exports=n(54)},35:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(10),o=n.n(c),i=n(2),u=(n(35),n(6)),l=["a","b","c","d","e","f","g","h"],s=function(e){return 8*(Number(e.charAt(1))-1)+l.indexOf(e.charAt(0))},p=function(e){return l[e%8]+((e-e%8)/8+1)},f=function(e){for(var t=[],n=0;n<64;n++)t.push({type:null,image:null,moves:[],status:null});var r={k:"bKingHd.png",K:"wKingHd.png",q:"bQueenHd.png",Q:"wQueenHd.png",p:"bPawnHd.png",P:"wPawnHd.png",n:"bKnightHd.png",N:"wKnightHd.png",r:"bRookHd.png",R:"wRookHd.png",b:"bBishopHd.png",B:"wBishopHd.png",x:"bPawnHd.png",X:"wPawnHd.png"};return e.forEach((function(e){t[s(e.pos)]={type:e.type,moves:e.moves,image:r[e.type],status:null}})),t};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={list:f([]),active:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GAME_STATE":return{active:null,list:t.data?f(t.data.pieces):g.list};case"MAKE_SQUARE_ACTIVE":var n=s(t.pos),r=e.list[n].moves;return{active:t.pos,list:e.list.map((function(e,t){return d({},e,{status:t===n?"active":r.includes(p(t))?"option":null})}))};case"MAKE_SQUARE_INACTIVE":return{active:null,list:e.list.map((function(e){return d({},e,{status:null})}))};default:return e}},v=function(){return a.a.createElement("div",{className:"option-marker",style:{borderRadius:"50%",height:"25%",width:"25%"}})},h=n(1),y=n.n(h),E=n(3),O=n(4),w=n.n(O),S=window.location.origin,x=S+"/api/board",j=function(e,t){return w.a.post("".concat(x,"?command=").concat(e).concat(t))},k=function(e){var t=e.res;return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"error: ".concat(t.status," ").concat(t.statusText)),a.a.createElement("pre",null,t.data))},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GAME_STATE":return null;case"SET_NOTIFICATION":return t.notification?{notification:t.notification,onClose:t.onClose,props:t.props}:null;default:return e}},P=function(e,t,n){return{type:"SET_NOTIFICATION",notification:e,onClose:t,props:n}},I=n(9),_=document.querySelector("body"),A=document.createElement("div");A.style.cssText="height: 1em; width: 1ch; box-sizing: border-box; visibility: hidden;";var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;e.appendChild(A);var t=A.offsetHeight,n=A.offsetWidth;return e.removeChild(A),{em:t,ch:n}}(),C=N.ch,D=N.em,H=function(){var e=2+4*D+C,t=window.innerHeight-e,n=window.innerWidth,r=t<n?t:n;return r-r%8},R=H(),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARD_SIZE":return H();default:return e}};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GAME_STATE":return t.data?L({},t.data):null;default:return e}},q=function(e){return{type:"SET_GAME_STATE",data:e}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return!0;case"LOGOUT":return!1;default:return e}};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V={createOrJoin:"create",gameType:"local",color:"white",gameId:null},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MENU_STATE_CREATE_OR_JOIN":return K({},V,{createOrJoin:t.value});case"SET_MENU_STATE_GAME_TYPE":return K({},e,{gameType:t.value,color:"local"===t.value?V.color:e.color});case"SET_MENU_STATE_COLOR":return K({},e,{color:t.value});case"SET_MENU_STATE_GAME_ID":return K({},e,{gameId:t.value||null});default:return e}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_API_INTERVAL":return t.interval;case"CLEAR_API_INTERVAL":return e&&clearInterval(e),null;default:return e}},W=Object(I.b)({boardSize:M,gameState:z,squares:b,loggedin:U,notification:T,menuState:F,interval:Q}),B=Object(I.c)(W),X={setGameState:q,setNotification:P},Y=Object(i.b)(null,X)((function(e){var t=e.text,n=e.setGameState,r=e.setNotification;return a.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},a.a.createElement("pre",null,t),a.a.createElement("button",{onClick:function(e){n(null),r()},style:{margin:"1ch",height:"3em"}},"back to menu"))})),Z=function(){var e=Object(E.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get(x+"?turnOnly=true");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),$=function(e){console.log(e),e&&e.response&&B.dispatch(P(k,null,{res:e.response}))},ee=function(){var e=Object(E.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get(x+"?turnOnly=false");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(E.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(t,n);case 3:ne(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),$(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(E.a)(y.a.mark((function e(){var t,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:if(t=e.sent,n=t.isEnd,r=t.yourTurn,!n&&!r){e.next=7;break}return e.abrupt("return");case 7:B.dispatch({type:"SET_API_INTERVAL",interval:setInterval(Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:e.sent&&(B.dispatch({type:"CLEAR_API_INTERVAL"}),ae());case 4:case"end":return e.stop()}}),e)}))),5e3)});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B.dispatch({type:"CLEAR_API_INTERVAL"}),e.next=4,w.a.post(x+"?command=surrender");case 4:ae(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),$(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(E.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return(t=e.sent)&&(B.dispatch(q(t)),t.isEnd&&B.dispatch(P(Y,null,{text:t.description}))),e.abrupt("return",{isEnd:t.isEnd,yourTurn:t.yourTurn});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(E.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n="knight"===t?"n":t.charAt(0),w.a.post("".concat(x,"?command=").concat(n));case 3:ne(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),$(e.t0);case 9:case"end":return e.stop()}var n}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),oe={makeSquareActive:function(e){return{type:"MAKE_SQUARE_ACTIVE",pos:e}},makeSquareInactive:function(){return{type:"MAKE_SQUARE_INACTIVE"}}},ie=Object(i.b)((function(e){return{squares:e.squares}}),oe)((function(e){var t=e.image,n=e.moves,r=e.status,c=e.pos,o=e.squares;return a.a.createElement("div",{style:{boxSizing:"border-box",height:"12.5%",width:"12.5%",backgroundImage:t?'url("'.concat(t,'")'):void 0,backgroundSize:"cover"},onClick:function(t){switch(r){case"active":e.makeSquareInactive();break;case"option":te(o.active,c);break;default:n.length>0&&e.makeSquareActive(c)}}},a.a.createElement("div",{style:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxSizing:"border-box"},className:"active"===r?"active-square":"option"===r?"option-square":null},"option"===r?a.a.createElement(v,null):null))}));function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var le=function(e){e=e.map((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{i:t})}));for(var t=[],n=56;n>=0;n-=8)t=t.concat(e.slice(n,n+8));return t.map((function(e){var t=p(e.i);return a.a.createElement(ie,{key:t,image:e.image,moves:e.moves,pos:t,status:e.status})}))},se=Object(i.b)((function(e){return{boardSize:e.boardSize,gameState:e.gameState,squares:e.squares}}))((function(e){var t=e.boardSize,n=e.gameState,r=e.squares;return null===n?null:a.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",height:t+"px",width:t+"px",boxSizing:"border-box",backgroundImage:'url("simple-board.png")',backgroundSize:"cover"}},le(r.list))}));function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me=function(e){var t=e.style,n=void 0===t?{}:t,r=e.text,c=e.clickHandler;return a.a.createElement("button",{style:fe({height:"3em"},n),onClick:c,className:"board-options-button"},r)},de={setGameState:q},ge=Object(i.b)((function(e){return{gameState:e.gameState,boardSize:e.boardSize}}),de)((function(e){var t=e.gameState,n=e.boardSize,r=e.setGameState;return a.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1ch",width:n+"px",height:"4em",paddingLeft:"1ch",paddingRight:"1ch",boxSizing:"border-box"},className:"board-options"},a.a.createElement("div",{style:{overflow:"auto"}},t.description),t.isEnd?a.a.createElement(me,{style:{marginLeft:"1ch"},text:"back to menu",clickHandler:function(){return r(null)}}):a.a.createElement(me,{style:{marginLeft:"1ch"},text:"surrender",clickHandler:function(){return re()}}))})),be=Object(i.b)((function(e){return{gameState:e.gameState,boardSize:e.boardSize}}))((function(e){return null===e.gameState?null:a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement(se,null),a.a.createElement(ge,null))})),ve={display:"flex",flexDirection:"column",width:"20%",minHeight:"38em",maxHeight:"100vh",minWidth:"30ch",justifyContent:"space-around",alignItems:"center",padding:"2em",margin:"1em"},he={height:"100%",boxSizing:"border-box",flexGrow:"1"},ye={height:"1.7em",display:"flex"},Ee={height:"3em",width:"33%",margin:"1em"},Oe=S+"/api/users",we=function(e,t){return w.a.post("".concat(Oe,"?action=create&name=").concat(e,"&password=").concat(t))},Se=function(e,t){return w.a.post("".concat(Oe,"?action=login&name=").concat(e,"&password=").concat(t))},xe=function(e){console.log(e),e&&e.response&&B.dispatch(P(k,null,{res:e.response}))},je=function(){var e=Object(E.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,we(t,n);case 3:B.dispatch({type:"LOGIN"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),xe(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),ke=function(){var e=Object(E.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se(t,n);case 3:B.dispatch({type:"LOGIN"}),ae(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),xe(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),Te=function(){var e=Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.post(Oe+"?action=guest");case 3:B.dispatch({type:"LOGIN"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),xe(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.post(Oe+"?action=logout");case 3:B.dispatch({type:"LOGOUT"}),B.dispatch(q(null)),B.dispatch({type:"CLEAR_API_INTERVAL"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),xe(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Ie=function(){return a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.loginName.value,n=e.target.loginPassword.value;ke(t,n)},style:ve},a.a.createElement("h1",null,"Log in"),a.a.createElement("div",{className:"form-div",style:ye},a.a.createElement("label",{htmlFor:"loginName"},"name:"),a.a.createElement("input",{id:"loginName",type:"text",name:"loginName",style:he})),a.a.createElement("div",{className:"form-div",style:ye},a.a.createElement("label",{htmlFor:"loginPassword"},"password:"),a.a.createElement("input",{id:"loginPassword",type:"password",name:"loginPassword",style:he})),a.a.createElement("button",{type:"submit",style:Ee},"log in"))},_e=function(){return a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.signInName.value,n=e.target.signInPassword.value;je(t,n)},style:ve},a.a.createElement("h1",null,"Sign up"),a.a.createElement("div",{className:"form-div",style:ye},a.a.createElement("label",{htmlFor:"signInName"},"name:"),a.a.createElement("input",{id:"signInName",type:"text",name:"signInName",style:he})),a.a.createElement("div",{className:"form-div",style:ye},a.a.createElement("label",{htmlFor:"signInPassword"},"password:"),a.a.createElement("input",{id:"signInPassword",type:"password",name:"signInPassword",style:he})),a.a.createElement("button",{type:"submit",style:Ee},"sign up"))},Ae=function(){return a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),Te()},style:ve},a.a.createElement("h1",null,"Log in as guest"),a.a.createElement("button",{type:"submit",style:Ee},"log in"))},Ne=Object(i.b)((function(e){return{gameState:e.gameState,loggedin:e.loggedin}}))((function(e){var t=e.gameState,n=e.loggedin;return null!==t||n?null:a.a.createElement("div",{style:{height:"100%",width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",alignItems:"center"}},a.a.createElement(Ie,null),a.a.createElement(_e,null),a.a.createElement(Ae,null))})),Ce=function(e){var t=e.name,n=e.value,r=e.changeHandler,c=e.isDefault,o=e.title;return a.a.createElement("div",{title:o},a.a.createElement("input",{type:"radio",name:t,value:n,id:n,defaultChecked:c,onChange:r}),a.a.createElement("label",{htmlFor:n},n))},De={setMenuStateCreateOrJoin:function(e){return{type:"SET_MENU_STATE_CREATE_OR_JOIN",value:e}}},He=Object(i.b)(null,De)((function(e){var t=e.setMenuStateCreateOrJoin,n=function(e){return t(e.target.value)};return a.a.createElement("div",{style:{width:"100%",marginTop:"1em"}},a.a.createElement(Ce,{name:"create-or-join",value:"create",changeHandler:n,isDefault:!0}),a.a.createElement(Ce,{name:"create-or-join",value:"join",changeHandler:n}))})),Re={setMenuStateGameType:function(e){return{type:"SET_MENU_STATE_GAME_TYPE",value:e}}},Me=Object(i.b)(null,Re)((function(e){var t=e.setMenuStateGameType,n=function(e){return t(e.target.value)};return a.a.createElement("div",{style:{width:"100%",marginTop:"1em"}},a.a.createElement(Ce,{name:"game-type",value:"local",changeHandler:n,isDefault:!0,title:"both sides will be played on this computer"}),a.a.createElement(Ce,{name:"game-type",value:"bot",changeHandler:n,title:"play against a bot"}),a.a.createElement(Ce,{name:"game-type",value:"multiplayer",changeHandler:n,title:"play against another player over the internet"}))})),Ge={setMenuStateColor:function(e){return{type:"SET_MENU_STATE_COLOR",value:e}}},Le=Object(i.b)(null,Ge)((function(e){var t=e.setMenuStateColor,n=function(e){return t(e.target.value)};return a.a.createElement("div",{style:{width:"100%",marginTop:"1em"}},a.a.createElement(Ce,{name:"select-side",value:"white",changeHandler:n,isDefault:!0}),a.a.createElement(Ce,{name:"select-side",value:"black",changeHandler:n}))})),ze=n(24),qe=S+"/api/games",Ue=function(e,t){return w.a.post("".concat(qe,"?type=").concat(e,"&color=").concat(t))},Je=function(e){return w.a.put("".concat(qe,"?game=").concat(e))},Ke=function(e){console.log(e),e&&e.response&&B.dispatch(P(k,null,{res:e.response}))},Ve=function(){var e=Object(E.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get(qe);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(E.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ue(t,n);case 3:ae(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Ke(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(E.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je(t);case 3:ae(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Ke(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),We={setMenuStateGameId:function(e){return{type:"SET_MENU_STATE_GAME_ID",value:e}}},Be=Object(i.b)(null,We)((function(e){var t=e.setMenuStateGameId,n=Object(r.useState)([]),c=Object(ze.a)(n,2),o=c[0],i=c[1];return Object(r.useEffect)((function(){Object(E.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),a.a.createElement("div",{style:{width:"100%",marginTop:"1em"}},a.a.createElement("select",{name:"games",id:"select-game",style:{height:"2.5em"},onChange:function(e){return t(e.target.value)}},a.a.createElement("option",{value:""},"select game"),o.filter((function(e){return null===e.white})).map((function(e){return a.a.createElement("option",{key:e.id,value:e.id},"".concat(e.black," playing as black"))})).concat(o.filter((function(e){return null===e.black})).map((function(e){return a.a.createElement("option",{key:e.id,value:e.id},"".concat(e.white," playing as white"))})))))}));function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze=Object(i.b)((function(e){return{gameState:e.gameState,loggedin:e.loggedin,menuState:e.menuState}}))((function(e){var t=e.gameState,n=e.loggedin,r=e.menuState;return null===t&&n?a.a.createElement("div",null,a.a.createElement("form",{onSubmit:function(){var e=Object(E.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),"create"===r.createOrJoin?Fe(r.gameType,r.color):Qe(r.gameId);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:Ye({},ve,{justifyContent:"space-between"})},a.a.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",flexDirection:"column"}},a.a.createElement("h1",null,"Game menu"),a.a.createElement(He,null),"create"===r.createOrJoin?a.a.createElement(Me,null):a.a.createElement(Be,null),"local"!==r.gameType?a.a.createElement(Le,null):null),a.a.createElement("button",{type:"submit",style:Ee},"Go!"))):null})),$e=function(e){var t=e.clickHandler;return a.a.createElement("button",{className:"close-button",style:{height:"2em",width:"2em",boxSizing:"border-box"},onClick:t},"X")},et=function(e){var t=e.closeHandler;return a.a.createElement("div",{className:"notification-bar",style:{display:"flex",justifyContent:"flex-end"}},a.a.createElement($e,{clickHandler:t}))},tt={setNotification:P},nt=Object(i.b)((function(e){return{notification:e.notification}}),tt)((function(e){var t=e.notification,n=e.setNotification;return null===t?null:a.a.createElement("div",{style:{position:"fixed",top:"0px",left:"0px",height:"100vh",width:"100vw",backgroundColor:"rgba(127, 127, 127, 0.5)",display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement("div",{style:{maxHeight:"100vh",maxWidth:"100vw",minWidth:"25ch",display:"flex",flexDirection:"column",alignItems:"stretch"},className:"notification"},a.a.createElement(et,{closeHandler:function(){n(),"function"===typeof t.onClose&&t.onClose()}}),a.a.createElement("div",{style:{overflow:"auto"}},a.a.createElement(t.notification,t.props))))})),rt=Object(i.b)((function(e){return{loggedin:e.loggedin}}))((function(e){return e.loggedin?a.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",position:"fixed",top:"0px",left:"0px",width:"100vw"}},a.a.createElement("button",{style:{borderRadius:"50%",margin:"2ch",height:"3em",width:"3em"},className:"log-out-button",title:"log out",onClick:Pe},"<")):null}));var at=function(){return a.a.createElement("div",{style:{minHeight:"100vh",minWidth:"100vw",backgroundColor:"black",backgroundImage:'url("42mswQ0-matrix-wallpaper-hd.jpg")',backgroundSize:"cover"}},a.a.createElement("div",{style:{minWidth:"100vw",minHeight:"100vh",backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement(Ne,null),a.a.createElement(Ze,null),a.a.createElement(be,null),a.a.createElement(rt,null),a.a.createElement(nt,null)))},ct=function(e,t){return t.charAt(0)+function(){switch(e){case"bishop":return"BishopHd.png";case"rook":return"RookHd.png";case"knight":return"KnightHd.png";default:return"QueenHd.png"}}()},ot=Object(i.b)((function(e){return{boardSize:e.boardSize,gameState:e.gameState}}))((function(e){var t=e.type,n=e.boardSize,r=e.gameState;return a.a.createElement("div",{style:{height:n/8+"px",width:n/8+"px",margin:"1ch",backgroundImage:'url("'.concat(ct(t,r.yourColor),'")'),backgroundSize:"cover",boxSizing:"border-box"},title:t,onClick:function(){return ce(t)},className:"promotion-option"})})),it=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{style:{marginLeft:"1ch"}},"promoto to:"),a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(ot,{type:"queen"}),a.a.createElement(ot,{type:"bishop"}),a.a.createElement(ot,{type:"rook"}),a.a.createElement(ot,{type:"knight"})))},ut=function(){return w.a.get(S+"/authenticate")},lt=function(){var e=Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ut();case 3:B.dispatch({type:"LOGIN"}),ae(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();o.a.render(a.a.createElement(i.a,{store:B},a.a.createElement(at,null)),document.getElementById("root")),window.onresize=function(e){return B.dispatch({type:"SET_BOARD_SIZE"})},B.subscribe((function(){var e=B.getState();null===e.notification&&null!==e.gameState&&e.gameState.pieces.some((function(e){return"x"===e.type.toLowerCase()}))&&B.dispatch(P(it))})),lt(),console.log("initial state:",B.getState()),B.subscribe((function(){return console.log("state:",B.getState())}))}},[[25,1,2]]]);
//# sourceMappingURL=main.def4624f.chunk.js.map